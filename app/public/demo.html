<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css"
          integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">

    <style>
        #root, #root2 {
            max-width: 500px;
            margin: 10px;
            transition: width 1s
        }

        .box {
            box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.16), 0 0 0 1px rgba(0, 0, 0, 0.08);
            border-radius: 2px;
        }

        .result-area {
            max-height: 300px;
            overflow: auto;
            overflow-x: hidden;
            z-index: 980;
            background: white;
            position: absolute;
            max-width: 700px;
            transition: max-width 1s linear
        }

        .result-text {

        }

        ::-webkit-scrollbar-track {
            -webkit-box-shadow: rgba(0, 0, 0, 0.4);
            background-color: #F5F5F5;
        }

        ::-webkit-scrollbar {
            width: 3px;
            background-color: #F5F5F5;
        }

        ::-webkit-scrollbar-thumb {
            background-color: rgba(0, 0, 0, 0.5);
        }
    </style>
</head>
<body>

<div class="">

    <section id="intelligent-select-tree-root">

        <div class="container-fluid">

            <!--FILTER-->
            <a class="d-flex flex-d-flex-reverse" data-toggle="collapse" href="#collapseFilter"
               aria-expanded="false"
               aria-controls="collapseExample">
                Show filter
            </a>
            <div class="collapse" id="collapseFilter">
                <div class="card card-body d-block">
                    <input type="checkbox" id="showProviders" name="show" value="providers" checked>
                    <label for="showProviders">Show providers/info</label>
                    <div class="w-100"></div>
                    <input type="checkbox" id="collapseAll" name="collapse" value="collapseAll" checked>
                    <label for="collapseAll">Collapse all</label>
                </div>
            </div>

            <!--FORM INPUT-->
            <div class="input-group box border-secondary" id="autocomplete-inputbox-0">
                <input type="text" class="form-control" placeholder="Search for..."
                       autocomplete="off" spellcheck="false" role="combobox"
                       aria-autocomplete="list" aria-expanded="false"
                       aria-labelledby="search-input" aria-owns="autocomplete-listbox-0" dir="auto">
                <span class="input-group-btn">
                    <div data-delay='{ "show": 400, "hide": 100 }' data-toggle="tooltip"
                         data-placement="right"
                         data-template='<div class="tooltip" role="tooltip"><div class="arrow d-flex bg-info"></div><div class="tooltip-inner bg-info"></div></div>'
                         title="DidnÂ´t find your term? Add new one.">
                        <button type="button" class="btn btn-primary d-flex justify-content-center align-items-center"
                                data-toggle="modal" data-target="#formModal">
                            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
                                <g class="nc-icon-wrapper" fill="#ffffff">
                                    <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path>
                                </g>
                            </svg>
                        </button>
                    </div>
                </span>


            </div>

            <!--RESULTS-->
            <div class="border border-secondary border-top-0 box result-area" id="autocomplete-listbox-0"
                 role="listbox">
                <div class="container">

                    <!--RESULT 1-->
                    <div class="row">
                        <div class="empty d-flex justify-content-center align-items-center"
                             style="width: 26px">

                        </div>
                        <div class="col border list-group-item-action d-flex justify-content-start align-items-center">
                            <div class="col" data-toggle="tooltip" data-placement="bottom"
                                 title="Result 1 Providers or some info">Result 1
                            </div>

                            <div class="col-auto" data-delay='{ "show": 200, "hide": 100 }' data-toggle="tooltip"
                                 data-placement="bottom"
                                 data-template='<div class="tooltip" role="tooltip"><div class="arrow bg-warning"></div><div class="tooltip-inner bg-warning text-dark border border-dark"></div></div>'
                                 title="This is new term, that should not be verified.">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24">
                                    <g class="nc-icon-wrapper" fill="#f67d12">
                                        <path d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path>
                                    </g>
                                </svg>
                            </div>
                            <div class="col-auto badge badge-secondary">new</div>
                            <div class="col-auto text-truncate" style="max-width: 120px" data-toggle="tooltip" data-placement="right"
                                 title="term category/type"
                                data-template='<div class="tooltip" role="tooltip"><div class="arrow bg-light"></div><div class="tooltip-inner bg-light text-dark border border-dark"></div></div>'>term category/type</div>
                        </div>
                    </div>

                    <!--RESULT 2-->
                    <div class="row">
                        <div class="empty d-flex justify-content-center align-items-center"
                             style="width: 26px">
                            <a data-toggle="collapse" href="#sub_result-id"
                               aria-expanded="false"
                               aria-controls="sub_result-id">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
                                    <g class="nc-icon-wrapper" fill="#444444">
                                        <path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path>
                                    </g>
                                </svg>
                            </a>

                        </div>
                        <div class="col border list-group-item-action d-flex justify-content-start align-items-center">
                            <div class="col" data-toggle="tooltip" data-placement="bottom"
                                 title="Result 2 Providers or some info">Result 2
                            </div>
                            <div class="col-auto text-truncate" style="max-width: 120px" data-toggle="tooltip" data-placement="right"
                                 title="term category/type"
                                data-template='<div class="tooltip" role="tooltip"><div class="arrow bg-light"></div><div class="tooltip-inner bg-light text-dark border border-dark"></div></div>'>term category/type</div>
                        </div>
                    </div>

                    <div class="sub-results collapse ml-3" id="sub_result-id">
                        <!--SUB RESULT 2-->
                        <div class="row">
                            <div class="empty d-flex justify-content-center align-items-center"
                                 style="width: 26px">
                                <a data-toggle="collapse" href="#sub_sub_result2-id"
                                   aria-expanded="false"
                                   aria-controls="sub_sub_result2-id">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
                                        <g class="nc-icon-wrapper" fill="#444444">
                                            <path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path>
                                        </g>
                                    </svg>
                                </a>
                            </div>
                            <div class="col border list-group-item-action d-flex justify-content-start align-items-center">
                                <div class="col" data-toggle="tooltip" data-placement="bottom"
                                     title="Sub Result 2 Providers or some info">Sub Result 2
                                </div>
                                <div class="col-auto text-truncate" style="max-width: 120px" data-toggle="tooltip" data-placement="right"
                                 title="term category/type"
                                    data-template='<div class="tooltip" role="tooltip"><div class="arrow bg-light"></div><div class="tooltip-inner bg-light text-dark border border-dark"></div></div>'>term category/type</div>
                            </div>
                        </div>

                        <div class="sub-results collapse ml-3" id="sub_sub_result2-id">
                            <!--SUB SUB RESULT 2-->
                            <div class="row">
                                <div class="empty d-flex justify-content-center align-items-center"
                                     style="width: 26px">
                                </div>
                                <div class="col border list-group-item-action d-flex justify-content-end align-items-center">
                                    <div class="col result-text" data-toggle="tooltip" data-placement="bottom"
                                         title="Sub Sub Result 2 Providers or some info"> Vestibulumtristique orci a imperdiet aliquet. Nulla eu
                                    </div>

                                    <div class="col-auto badge badge-info">external</div>
                                    <div class="col-auto text-truncate" style="max-width: 120px" data-toggle="tooltip" data-placement="right"
                                 title="term category/type"
                                        data-template='<div class="tooltip" role="tooltip"><div class="arrow bg-light"></div><div class="tooltip-inner bg-light text-dark border border-dark"></div></div>'>term category/type</div>
                                </div>
                            </div>
                        </div>

                        <!--SUB RESULT 2.1-->
                        <div class="row">
                            <div class="empty d-flex justify-content-center align-items-center"
                                 style="width: 26px">
                                <a data-toggle="collapse" href="#sub_sub_result21-id"
                                   aria-expanded="false"
                                   aria-controls="sub_sub_result21-id">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
                                        <g class="nc-icon-wrapper" fill="#444444">
                                            <path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path>
                                        </g>
                                    </svg>
                                </a>
                            </div>
                            <div class="col border list-group-item-action d-flex justify-content-start align-items-center">
                                <div class="col" data-toggle="tooltip" data-placement="bottom"
                                     title="Sub Result 2 Providers or some info">Sub Result 2.1
                                </div>
                                <div class="col-auto text-truncate" style="max-width: 120px" data-toggle="tooltip" data-placement="right"
                                 title="term category/type"
                                    data-template='<div class="tooltip" role="tooltip"><div class="arrow bg-light"></div><div class="tooltip-inner bg-light text-dark border border-dark"></div></div>'>term category/type</div>
                            </div>
                        </div>

                        <div class="sub-results collapse ml-3" id="sub_sub_result21-id">
                            <!--SUB SUB RESULT 2-->
                            <div class="row">
                                <div class="empty d-flex justify-content-center align-items-center"
                                     style="width: 26px">
                                </div>
                                <div class="col border list-group-item-action d-flex justify-content-start align-items-center">
                                    <div class="col" data-toggle="tooltip" data-placement="bottom"
                                         title="Sub Sub Result 2 Providers or some info">Sub Sub Result 2.1
                                    </div>

                                    <div class="col-auto badge badge-info">external</div>
                                    <div class="col-auto text-truncate" style="max-width: 120px" data-toggle="tooltip" data-placement="right"
                                 title="term category/type"
                                        data-template='<div class="tooltip" role="tooltip"><div class="arrow bg-light"></div><div class="tooltip-inner bg-light text-dark border border-dark"></div></div>'>term category/type</div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <!--RESULT 3-->
                    <div class="row">
                        <div class="empty d-flex justify-content-center align-items-center"
                             style="width: 26px">

                        </div>
                        <div class="col border list-group-item-action d-flex justify-content-start align-items-center">
                            <div class="col" data-toggle="tooltip" data-placement="bottom"
                                 title="Result 3 Providers or some info">Result 3
                            </div>
                            <div class="col-auto" data-delay='{ "show": 200, "hide": 100 }' data-toggle="tooltip"
                                 data-placement="bottom"
                                 data-template='<div class="tooltip" role="tooltip"><div class="arrow bg-warning"></div><div class="tooltip-inner bg-warning text-dark border border-dark"></div></div>'
                                 title="This term is result of merging terms from provider: 'provider1' and 'provider2'">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24">
                                    <g class="nc-icon-wrapper" fill="#f67d12">
                                        <path d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path>
                                    </g>
                                </svg>
                            </div>
                            <div class="col-auto badge badge-warning">merged</div>
                            <div class="col-auto text-truncate" style="max-width: 120px" data-toggle="tooltip" data-placement="right"
                                 title="term category/type"
                                data-template='<div class="tooltip" role="tooltip"><div class="arrow bg-light"></div><div class="tooltip-inner bg-light text-dark border border-dark"></div></div>'>term category/type</div>

                        </div>
                    </div>

                </div>
            </div>

        </div>

        <!-- Modal -->
        <div class="modal fade" id="formModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
             aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Add new Term</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        ...
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Save changes</button>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>


<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"
        integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
        crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js"
        integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1"
        crossorigin="anonymous"></script>

<script src="ResizeSensor.js"></script>
<!--Custom JS-->
<script>
    $(function () {
        $('[data-toggle="tooltip"]').tooltip()
    });

    (function set_autocomplete_min_width() {
        const minWidth = $('#autocomplete-inputbox-0').width();
        $('#autocomplete-listbox-0').css("min-width", minWidth)
    })();

    $('.sub-results').on('show.bs.collapse', function (e) {
        var id = e.target.id;
        var x = $("a[aria-controls='" + id + "']");
        x[0].innerHTML = `
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16">
            <g class="nc-icon-wrapper" fill="#444444">
                <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"></path>
            </g>
        </svg>`
    });

    $('.sub-results').on('hide.bs.collapse', function (e) {
        var id = e.target.id;
        var x = $("a[aria-controls='" + id + "']");
        x[0].innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
                <g class="nc-icon-wrapper" fill="#444444">
                    <path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path>
                </g>
            </svg>
`
    })

    new ResizeSensor($('#autocomplete-listbox-0'), function(){

        console.log('content dimension changed', $('#autocomplete-listbox-0').width(), $('#autocomplete-listbox-0').height());
        if ($('#autocomplete-listbox-0').width() === $('#autocomplete-inputbox-0').width()){
            $('#autocomplete-listbox-0').css("min-width", minWidth)
        }
//         $('#autocomplete-listbox-0').width( $('#autocomplete-listbox-0').width() )
    });
</script>
</body>
</html>